{"ast":null,"code":"import _regeneratorRuntime from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import StaffModal from\"./StaffModal\";import styles from\"../StudentStaffHouses.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Staff=function Staff(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),staff=_useState2[0],setStaff=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),staffClicked=_useState8[0],setStaffClicked=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),staffData=_useState10[0],setStaffData=_useState10[1];var fetchStaff=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,signal){var res,data,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(url,{signal:signal});case 5:res=_context.sent;if(!(res.status!==200)){_context.next=8;break;}throw new Error(\"Something went wrong.\");case 8:_context.next=10;return res.json();case 10:data=_context.sent;for(i=0;i<data.length;i++){if(data[i].image===\"\"){data[i].image=\"https://i.imgur.com/AAQNYhy.png\";}}setStaff(data);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);case 18:setIsLoading(false);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,15]]);}));return function fetchStaff(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){var url=\"https://hp-api.herokuapp.com/api/characters/staff\";var controller=new AbortController();fetchStaff(url,controller.signal);return function(){controller.abort();};},[]);var handleStaffClick=function handleStaffClick(event){for(var i=0;i<staff.length;i++){if(event.target.alt===staff[i].name){setStaffData(staff[i]);}}setStaffClicked(true);};var handleModalReturn=function handleModalReturn(){setStaffClicked(false);};var staffCharacters=staff.map(function(character,index){return/*#__PURE__*/_jsxs(\"div\",{className:styles.student_staff_houses,children:[/*#__PURE__*/_jsx(\"img\",{src:character.image,alt:character.name,onClick:handleStaffClick}),/*#__PURE__*/_jsx(\"p\",{children:character.name})]},index);});return/*#__PURE__*/_jsxs(_Fragment,{children:[staffClicked&&/*#__PURE__*/_jsx(StaffModal,{staffData:staffData,returnClicked:handleModalReturn}),!isLoading&&/*#__PURE__*/_jsx(\"div\",{children:staffCharacters}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading... please wait\"}),!isLoading&&error&&/*#__PURE__*/_jsx(\"p\",{children:error})]});};export default Staff;","map":{"version":3,"names":["React","useState","useEffect","StaffModal","styles","Staff","staff","setStaff","isLoading","setIsLoading","error","setError","staffClicked","setStaffClicked","staffData","setStaffData","fetchStaff","url","signal","fetch","res","status","Error","json","data","i","length","image","message","controller","AbortController","abort","handleStaffClick","event","target","alt","name","handleModalReturn","staffCharacters","map","character","index","student_staff_houses"],"sources":["/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/src/components/staff/Staff.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport StaffModal from \"./StaffModal\";\n\nimport styles from \"../StudentStaffHouses.module.css\";\n\nconst Staff = () => {\n  const [staff, setStaff] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const [staffClicked, setStaffClicked] = useState(false);\n  const [staffData, setStaffData] = useState({});\n\n  const fetchStaff = async (url, signal) => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch(url, { signal });\n\n      if (res.status !== 200) {\n        throw new Error(\"Something went wrong.\");\n      }\n\n      const data = await res.json();\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].image === \"\") {\n          data[i].image = \"https://i.imgur.com/AAQNYhy.png\";\n        }\n      }\n\n      setStaff(data);\n    } catch (err) {\n      setError(err.message);\n    }\n\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const url = \"https://hp-api.herokuapp.com/api/characters/staff\";\n\n    const controller = new AbortController();\n    fetchStaff(url, controller.signal);\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n\n  const handleStaffClick = (event) => {\n    for (let i = 0; i < staff.length; i++) {\n      if (event.target.alt === staff[i].name) {\n        setStaffData(staff[i]);\n      }\n    }\n    setStaffClicked(true);\n  };\n\n  const handleModalReturn = () => {\n    setStaffClicked(false);\n  };\n\n  let staffCharacters = staff.map((character, index) => {\n    return (\n      <div key={index} className={styles.student_staff_houses}>\n        <img\n          src={character.image}\n          alt={character.name}\n          onClick={handleStaffClick}\n        />\n        <p>{character.name}</p>\n      </div>\n    );\n  });\n\n  return (\n    <>\n      {staffClicked && (\n        <StaffModal\n          staffData={staffData}\n          returnClicked={handleModalReturn}\n        ></StaffModal>\n      )}\n      {!isLoading && <div>{staffCharacters}</div>}\n      {isLoading && <p>Loading... please wait</p>}\n      {!isLoading && error && <p>{error}</p>}\n    </>\n  );\n};\n\nexport default Staff;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}