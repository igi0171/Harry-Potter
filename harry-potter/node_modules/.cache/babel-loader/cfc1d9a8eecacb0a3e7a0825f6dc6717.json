{"ast":null,"code":"import _regeneratorRuntime from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Character from\"./Character\";import styles from\"./Characters.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Characters=function Characters(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),findCharacter=_useState2[0],setFindCharacter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),charactersAlphabetical=_useState4[0],setCharactersAlphabetical=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),characters=_useState6[0],setCharacters=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var fetchCharacters=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,signal){var res,data,i,j,dataAlphabetical;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(url,{signal:signal});case 5:res=_context.sent;if(!(res.status!==200)){_context.next=8;break;}throw new Error(\"Something went wrong.\");case 8:_context.next=10;return res.json();case 10:data=_context.sent;for(i=0;i<data.length;i++){if(data[i].image===\"\"){data[i].image=\"https://i.imgur.com/AAQNYhy.png\";}for(j=i+1;j<data.length;j++){if(data[i].name===data[j].name){data.splice(j,1);}}}dataAlphabetical=JSON.parse(JSON.stringify(data));dataAlphabetical.sort(function(a,b){var nameA=a.name.toUpperCase();// ignore upper and lowercase\nvar nameB=b.name.toUpperCase();// ignore upper and lowercase\nif(nameA<nameB){return-1;}if(nameA>nameB){return 1;}// names must be equal\nreturn 0;});setCharactersAlphabetical(dataAlphabetical);setCharacters(data);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);case 21:setIsLoading(false);case 22:case\"end\":return _context.stop();}}},_callee,null,[[2,18]]);}));return function fetchCharacters(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){var url=\"https://hp-api.herokuapp.com/api/characters\";var controller=new AbortController();fetchCharacters(url,controller.signal);return function(){controller.abort();};},[]);var handleCharacterChange=function handleCharacterChange(event){setFindCharacter(event.target.value);};var handleCharacterChangeRandom=function handleCharacterChangeRandom(event){event.preventDefault();setFindCharacter(charactersAlphabetical[Math.floor(Math.random()*charactersAlphabetical.length)].name);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.top_bar,children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.find_character,children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"character\",children:\"Find Character:\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.select_character,children:[/*#__PURE__*/_jsx(\"input\",{id:\"character\",type:\"text\",onChange:handleCharacterChange,list:\"characters\",placeholder:\"Select a character\",value:findCharacter}),/*#__PURE__*/_jsx(\"datalist\",{id:\"characters\",children:charactersAlphabetical.map(function(character,index){return/*#__PURE__*/_jsx(\"option\",{value:character.name},index);})})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCharacterChangeRandom,children:\"Random Character\"})]}),!isLoading&&/*#__PURE__*/_jsx(Character,{characters:characters,findCharacter:findCharacter}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading... please wait\"}),!isLoading&&error&&/*#__PURE__*/_jsx(\"p\",{children:error})]});};export default Characters;","map":{"version":3,"names":["React","useState","useEffect","Character","styles","Characters","props","findCharacter","setFindCharacter","charactersAlphabetical","setCharactersAlphabetical","characters","setCharacters","isLoading","setIsLoading","error","setError","fetchCharacters","url","signal","fetch","res","status","Error","json","data","i","length","image","j","name","splice","dataAlphabetical","JSON","parse","stringify","sort","a","b","nameA","toUpperCase","nameB","message","controller","AbortController","abort","handleCharacterChange","event","target","value","handleCharacterChangeRandom","preventDefault","Math","floor","random","top_bar","find_character","select_character","map","character","index"],"sources":["/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/src/components/characters/Characters.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Character from \"./Character\";\n\nimport styles from \"./Characters.module.css\";\n\nconst Characters = (props) => {\n  const [findCharacter, setFindCharacter] = useState(\"\");\n  const [charactersAlphabetical, setCharactersAlphabetical] = useState([]);\n  const [characters, setCharacters] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchCharacters = async (url, signal) => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch(url, { signal });\n\n      if (res.status !== 200) {\n        throw new Error(\"Something went wrong.\");\n      }\n\n      const data = await res.json();\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].image === \"\") {\n          data[i].image = \"https://i.imgur.com/AAQNYhy.png\";\n        }\n        for (let j = i + 1; j < data.length; j++) {\n          if (data[i].name === data[j].name) {\n            data.splice(j, 1);\n          }\n        }\n      }\n      const dataAlphabetical = JSON.parse(JSON.stringify(data));\n\n      dataAlphabetical.sort(function (a, b) {\n        const nameA = a.name.toUpperCase(); // ignore upper and lowercase\n        const nameB = b.name.toUpperCase(); // ignore upper and lowercase\n        if (nameA < nameB) {\n          return -1;\n        }\n        if (nameA > nameB) {\n          return 1;\n        }\n\n        // names must be equal\n        return 0;\n      });\n      setCharactersAlphabetical(dataAlphabetical);\n      setCharacters(data);\n    } catch (err) {\n      setError(err.message);\n    }\n\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const url = \"https://hp-api.herokuapp.com/api/characters\";\n\n    const controller = new AbortController();\n    fetchCharacters(url, controller.signal);\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n\n  const handleCharacterChange = (event) => {\n    setFindCharacter(event.target.value);\n  };\n\n  const handleCharacterChangeRandom = (event) => {\n    event.preventDefault();\n    setFindCharacter(\n      charactersAlphabetical[\n        Math.floor(Math.random() * charactersAlphabetical.length)\n      ].name\n    );\n  };\n\n  return (\n    <>\n      <div className={styles.top_bar}>\n        <form>\n          <div className={styles.find_character}>\n            <label htmlFor=\"character\">Find Character:</label>\n          </div>\n          <div className={styles.select_character}>\n            <input\n              id=\"character\"\n              type=\"text\"\n              onChange={handleCharacterChange}\n              list=\"characters\"\n              placeholder=\"Select a character\"\n              value={findCharacter}\n            ></input>\n            <datalist id=\"characters\">\n              {charactersAlphabetical.map((character, index) => {\n                return <option value={character.name} key={index} />;\n              })}\n            </datalist>\n          </div>\n        </form>\n        <button onClick={handleCharacterChangeRandom}>Random Character</button>\n      </div>\n      {!isLoading && (\n        <Character\n          characters={characters}\n          findCharacter={findCharacter}\n        ></Character>\n      )}\n      {isLoading && <p>Loading... please wait</p>}\n      {!isLoading && error && <p>{error}</p>}\n    </>\n  );\n};\n\nexport default Characters;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}