{"ast":null,"code":"import _regeneratorRuntime from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import HouseCharacterModal from\"./HouseCharacterModal\";import{useParams}from\"react-router-dom\";import styles from\"../StudentStaffHouses.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var House=function House(){var params=useParams();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),houseCharacters=_useState2[0],setHouseCharacters=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),houseCharacterClicked=_useState8[0],setHouseCharacterClicked=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),houseCharacterData=_useState10[0],setHouseCharacterData=_useState10[1];var handleHouseCharacterClick=function handleHouseCharacterClick(event){for(var i=0;i<houseCharacters.length;i++){if(event.target.alt===houseCharacters[i].name){setHouseCharacterData(houseCharacters[i]);}}setHouseCharacterClicked(true);};var handleModalReturn=function handleModalReturn(){setHouseCharacterClicked(false);};var fetchHouseCharacters=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,signal){var res,data,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(url,{signal:signal});case 5:res=_context.sent;if(!(res.status!==200)){_context.next=8;break;}throw new Error(\"Something went wrong.\");case 8:_context.next=10;return res.json();case 10:data=_context.sent;for(i=0;i<data.length;i++){if(data[i].image===\"\"){data[i].image=\"https://i.imgur.com/AAQNYhy.png\";}}setHouseCharacters(data);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);case 18:setIsLoading(false);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,15]]);}));return function fetchHouseCharacters(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){var url=\"https://hp-api.herokuapp.com/api/characters/house/\"+params.house;var controller=new AbortController();fetchHouseCharacters(url,controller.signal);return function(){controller.abort();};},[params.house]);var hogwartsHouseCharacters=houseCharacters.map(function(houseCharacter,index){return/*#__PURE__*/_jsxs(\"div\",{className:styles.student_staff_houses,children:[/*#__PURE__*/_jsx(\"img\",{src:houseCharacter.image,alt:houseCharacter.name,onClick:handleHouseCharacterClick}),/*#__PURE__*/_jsx(\"p\",{children:houseCharacter.name})]},index);});return/*#__PURE__*/_jsxs(_Fragment,{children:[houseCharacterClicked&&/*#__PURE__*/_jsx(HouseCharacterModal,{houseCharacterData:houseCharacterData,returnClicked:handleModalReturn}),/*#__PURE__*/_jsx(\"h1\",{className:styles.house_name,children:params.house.charAt(0).toUpperCase()+params.house.slice(1)}),!isLoading&&/*#__PURE__*/_jsx(\"div\",{children:hogwartsHouseCharacters}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading... please wait\"}),!isLoading&&error&&/*#__PURE__*/_jsx(\"p\",{children:error})]});};export default House;","map":{"version":3,"names":["React","useState","useEffect","HouseCharacterModal","useParams","styles","House","params","houseCharacters","setHouseCharacters","isLoading","setIsLoading","error","setError","houseCharacterClicked","setHouseCharacterClicked","houseCharacterData","setHouseCharacterData","handleHouseCharacterClick","event","i","length","target","alt","name","handleModalReturn","fetchHouseCharacters","url","signal","fetch","res","status","Error","json","data","image","message","house","controller","AbortController","abort","hogwartsHouseCharacters","map","houseCharacter","index","student_staff_houses","house_name","charAt","toUpperCase","slice"],"sources":["/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/src/components/houses/House.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport HouseCharacterModal from \"./HouseCharacterModal\";\nimport { useParams } from \"react-router-dom\";\n\nimport styles from \"../StudentStaffHouses.module.css\";\n\nconst House = () => {\n  const params = useParams();\n\n  const [houseCharacters, setHouseCharacters] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const [houseCharacterClicked, setHouseCharacterClicked] = useState(false);\n  const [houseCharacterData, setHouseCharacterData] = useState({});\n\n  const handleHouseCharacterClick = (event) => {\n    for (let i = 0; i < houseCharacters.length; i++) {\n      if (event.target.alt === houseCharacters[i].name) {\n        setHouseCharacterData(houseCharacters[i]);\n      }\n    }\n    setHouseCharacterClicked(true);\n  };\n\n  const handleModalReturn = () => {\n    setHouseCharacterClicked(false);\n  };\n\n  const fetchHouseCharacters = async (url, signal) => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch(url, { signal });\n\n      if (res.status !== 200) {\n        throw new Error(\"Something went wrong.\");\n      }\n\n      const data = await res.json();\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].image === \"\") {\n          data[i].image = \"https://i.imgur.com/AAQNYhy.png\";\n        }\n      }\n\n      setHouseCharacters(data);\n    } catch (err) {\n      setError(err.message);\n    }\n\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const url =\n      \"https://hp-api.herokuapp.com/api/characters/house/\" + params.house;\n\n    const controller = new AbortController();\n    fetchHouseCharacters(url, controller.signal);\n\n    return () => {\n      controller.abort();\n    };\n  }, [params.house]);\n\n  let hogwartsHouseCharacters = houseCharacters.map((houseCharacter, index) => {\n    return (\n      <div key={index} className={styles.student_staff_houses}>\n        <img\n          src={houseCharacter.image}\n          alt={houseCharacter.name}\n          onClick={handleHouseCharacterClick}\n        />\n        <p>{houseCharacter.name}</p>\n      </div>\n    );\n  });\n  return (\n    <>\n      {houseCharacterClicked && (\n        <HouseCharacterModal\n          houseCharacterData={houseCharacterData}\n          returnClicked={handleModalReturn}\n        ></HouseCharacterModal>\n      )}\n      <h1 className={styles.house_name}>\n        {params.house.charAt(0).toUpperCase() + params.house.slice(1)}\n      </h1>\n      {!isLoading && <div>{hogwartsHouseCharacters}</div>}\n      {isLoading && <p>Loading... please wait</p>}\n      {!isLoading && error && <p>{error}</p>}\n    </>\n  );\n};\n\nexport default House;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}