{"ast":null,"code":"import _regeneratorRuntime from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Student from\"./Student\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Students=function Students(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),students=_useState2[0],setStudents=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var fetchStudents=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url,signal){var res,data,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(url,{signal:signal});case 5:res=_context.sent;if(!(res.status!==200)){_context.next=8;break;}throw new Error(\"Something went wrong.\");case 8:_context.next=10;return res.json();case 10:data=_context.sent;for(i=0;i<data.length;i++){if(data[i].image===\"\"){data[i].image=\"https://i.imgur.com/AAQNYhy.png\";}if(data[i].house===\"\"){data[i].house=\"Unknown\";}}setStudents(data);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);case 18:setIsLoading(false);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,15]]);}));return function fetchStudents(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){var url=\"http://hp-api.herokuapp.com/api/characters/students\";var controller=new AbortController();fetchStudents(url,controller.signal);return function(){controller.abort();};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!isLoading&&/*#__PURE__*/_jsx(Student,{students:students}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading... please wait\"}),!isLoading&&error&&/*#__PURE__*/_jsx(\"p\",{children:error})]});};export default Students;","map":{"version":3,"names":["React","useState","useEffect","Student","Students","students","setStudents","isLoading","setIsLoading","error","setError","fetchStudents","url","signal","fetch","res","status","Error","json","data","i","length","image","house","message","controller","AbortController","abort"],"sources":["/Users/igi/Documents/GitHub/Harry-Potter/harry-potter/src/components/students/Students.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Student from \"./Student\";\n\nconst Students = () => {\n  const [students, setStudents] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchStudents = async (url, signal) => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch(url, { signal });\n\n      if (res.status !== 200) {\n        throw new Error(\"Something went wrong.\");\n      }\n\n      const data = await res.json();\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].image === \"\") {\n          data[i].image = \"https://i.imgur.com/AAQNYhy.png\";\n        }\n        if (data[i].house === \"\") {\n          data[i].house = \"Unknown\";\n        }\n      }\n\n      setStudents(data);\n    } catch (err) {\n      setError(err.message);\n    }\n\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const url = \"http://hp-api.herokuapp.com/api/characters/students\";\n\n    const controller = new AbortController();\n    fetchStudents(url, controller.signal);\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n\n  return (\n    <>\n      {!isLoading && <Student students={students}></Student>}\n      {isLoading && <p>Loading... please wait</p>}\n      {!isLoading && error && <p>{error}</p>}\n    </>\n  );\n};\n\nexport default Students;\n"],"mappings":"ibAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,QAAP,KAAoB,WAApB,C,6IAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACrB,cAAgCH,QAAQ,CAAC,EAAD,CAAxC,wCAAOI,QAAP,eAAiBC,WAAjB,eAEA,eAAkCL,QAAQ,CAAC,KAAD,CAA1C,yCAAOM,SAAP,eAAkBC,YAAlB,eACA,eAA0BP,QAAQ,CAAC,IAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eAEA,GAAMC,cAAa,4FAAG,iBAAOC,GAAP,CAAYC,MAAZ,mIACpBL,YAAY,CAAC,IAAD,CAAZ,CACAE,QAAQ,CAAC,IAAD,CAAR,CAFoB,sCAKAI,MAAK,CAACF,GAAD,CAAM,CAAEC,MAAM,CAANA,MAAF,CAAN,CALL,QAKZE,GALY,oBAOdA,GAAG,CAACC,MAAJ,GAAe,GAPD,+BAQV,IAAIC,MAAJ,CAAU,uBAAV,CARU,+BAWCF,IAAG,CAACG,IAAJ,EAXD,SAWZC,IAXY,eAYlB,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGD,IAAI,CAACE,MAAzB,CAAiCD,CAAC,EAAlC,CAAsC,CACpC,GAAID,IAAI,CAACC,CAAD,CAAJ,CAAQE,KAAR,GAAkB,EAAtB,CAA0B,CACxBH,IAAI,CAACC,CAAD,CAAJ,CAAQE,KAAR,CAAgB,iCAAhB,CACD,CACD,GAAIH,IAAI,CAACC,CAAD,CAAJ,CAAQG,KAAR,GAAkB,EAAtB,CAA0B,CACxBJ,IAAI,CAACC,CAAD,CAAJ,CAAQG,KAAR,CAAgB,SAAhB,CACD,CACF,CAEDjB,WAAW,CAACa,IAAD,CAAX,CArBkB,iFAuBlBT,QAAQ,CAAC,YAAIc,OAAL,CAAR,CAvBkB,QA0BpBhB,YAAY,CAAC,KAAD,CAAZ,CA1BoB,qEAAH,kBAAbG,cAAa,gDAAnB,CA6BAT,SAAS,CAAC,UAAM,CACd,GAAMU,IAAG,CAAG,qDAAZ,CAEA,GAAMa,WAAU,CAAG,GAAIC,gBAAJ,EAAnB,CACAf,aAAa,CAACC,GAAD,CAAMa,UAAU,CAACZ,MAAjB,CAAb,CAEA,MAAO,WAAM,CACXY,UAAU,CAACE,KAAX,GACD,CAFD,CAGD,CATQ,CASN,EATM,CAAT,CAWA,mBACE,2BACG,CAACpB,SAAD,eAAc,KAAC,OAAD,EAAS,QAAQ,CAAEF,QAAnB,EADjB,CAEGE,SAAS,eAAI,6CAFhB,CAGG,CAACA,SAAD,EAAcE,KAAd,eAAuB,mBAAIA,KAAJ,EAH1B,GADF,CAOD,CArDD,CAuDA,cAAeL,SAAf"},"metadata":{},"sourceType":"module"}